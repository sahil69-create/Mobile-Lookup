<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Advanced Mobile Info Lookup</title>

<!-- CSS FILE WILL COME IN NEXT PART -->
<style>
/* ===================== BASIC RESET ===================== */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: "Poppins", sans-serif;
}

body {
    background: #0d0d0d;
    color: #fff;
    overflow-x: hidden;
}

/* ===================== LOADER ===================== */
.loader-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.85);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 999;
}

.loader {
    width: 60px;
    height: 60px;
    border: 6px solid #333;
    border-top-color: #ff9800;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

.loader-container p {
    margin-top: 15px;
    color: #ff9900;
    font-size: 18px;
}


/* ===================== SIDEBAR ===================== */
.sidebar {
    position: fixed;
    top: 0;
    left: -260px;
    width: 240px;
    height: 100%;
    background: rgba(20, 20, 20, 0.95);
    backdrop-filter: blur(8px);
    border-right: 1px solid #ff9900;
    padding: 20px;
    transition: 0.4s ease;
    z-index: 900;
}

.sidebar.open {
    left: 0;
}

.sidebar h2 {
    color: #ff9900;
    margin-bottom: 20px;
}

.sidebar a {
    display: block;
    margin: 15px 0;
    text-decoration: none;
    font-size: 18px;
    color: #fff;
    padding: 8px;
    border-radius: 5px;
    transition: 0.3s;
}

.sidebar a:hover {
    background: #ff9900;
    color: #000;
}

/* Hamburger */
.hamburger {
    position: fixed;
    top: 12px;
    left: 12px;
    font-size: 32px;
    color: #ff9900;
    cursor: pointer;
    z-index: 950;
    background: rgba(255,153,0,0.1);
    padding: 6px 12px;
    border-radius: 8px;
}


/* ===================== MAIN CONTAINER ===================== */
.container {
    padding: 80px 20px;
}


/* ===================== TITLES ===================== */
.title {
    font-size: 28px;
    text-align: center;
    margin-bottom: 20px;
    color: #ffae42;
}

.sub-title {
    font-size: 22px;
    margin: 10px 0 15px;
    color: #ffa726;
}


/* ===================== SECTIONS ===================== */
.section {
    display: none;
}

.section.active {
    display: block;
}


/* ===================== GLASS BOX ===================== */
.glass {
    background: rgba(255,255,255,0.06);
    padding: 15px;
    border-radius: 12px;
    border: 1px solid rgba(255,255,255,0.2);
    backdrop-filter: blur(12px);
}


/* ===================== INPUT AREA ===================== */
.input-box {
    margin: 20px auto;
    max-width: 400px;
    text-align: center;
}

.input-box input {
    width: 100%;
    padding: 12px;
    border-radius: 8px;
    border: 1px solid #ff9900;
    background: #222;
    color: #fff;
    font-size: 16px;
}

.input-box button {
    width: 100%;
    background: #ff9900;
    margin-top: 12px;
    padding: 12px;
    border-radius: 8px;
    border: none;
    font-size: 18px;
    font-weight: bold;
    color: #111;
    cursor: pointer;
    transition: 0.3s;
}

.input-box button:hover {
    background: #ffa726;
}


/* ===================== STATUS TEXT ===================== */
.status-text {
    text-align: center;
    margin-top: 15px;
    color: #ffcc80;
    font-size: 17px;
}


/* ===================== CODE BOX ===================== */
.code-box {
    background: #000;
    padding: 15px;
    border-radius: 10px;
    white-space: pre-wrap;
    max-height: 350px;
    overflow-y: auto;
    border: 1px solid #ff9900;
}


/* ===================== COPY BUTTON ===================== */
.copyBtn {
    margin-top: 15px;
    padding: 12px;
    width: 100%;
    background: #4aa3ff;
    border: none;
    border-radius: 8px;
    color: #000;
    font-weight: bold;
    font-size: 16px;
    cursor: pointer;
}

.copyBtn:hover {
    background: #66b5ff;
}


/* ===================== RESPONSIVE ===================== */
@media (max-width: 600px) {
    .title { font-size: 24px; }
    .sub-title { font-size: 20px; }
    .sidebar { width: 210px; }
    .hamburger { font-size: 28px; }
}
</style>

</head>
<body>

<!-- ===================== LOADER ====================== -->
<div id="loader" class="loader-container">
    <div class="loader"></div>
    <p>Loading...</p>
</div>

<!-- ===================== SIDEBAR NAV ====================== -->
<div class="sidebar" id="sidebar">
    <h2>ðŸ“± Menu</h2>
    <a href="#" onclick="showSection('home')">Home</a>
    <a href="#" onclick="showSection('raw')">Raw JSON</a>
    <a href="#" onclick="showSection('formatted')">Formatted Output</a>
</div>

<!-- Hamburger -->
<div class="hamburger" onclick="toggleSidebar()">â˜°</div>

<!-- ===================== MAIN CONTENT ====================== -->
<div class="container">

    <!-- HOME SECTION -->
    <section id="home" class="section active">
        <h1 class="title">Mobile Number Info Lookup</h1>

        <div class="input-box glass">
            <input id="num" maxlength="10" placeholder="Enter 10-digit mobile number">
            <button onclick="fetchInfo()">Search</button>
        </div>

        <div id="status" class="status-text"></div>
    </section>

    <!-- RAW JSON SECTION -->
    <section id="raw" class="section">
        <h2 class="sub-title">Raw JSON Result</h2>
        <pre id="rawBox" class="glass code-box">Waiting...</pre>
    </section>

    <!-- FORMATTED OUTPUT SECTION -->
    <section id="formatted" class="section">
        <h2 class="sub-title">Formatted Info</h2>
        <pre id="formattedBox" class="glass code-box">No data yet...</pre>

        <button class="copyBtn" onclick="copyFormatted()">Copy for WhatsApp</button>
    </section>

</div>

<!-- JS FILE WILL COME IN NEXT PART -->
<script>
/* ===================== SIDEBAR CONTROL ===================== */
function toggleSidebar() {
    document.getElementById("sidebar").classList.toggle("open");
}

function showSection(id) {
    document.querySelectorAll(".section").forEach(sec => sec.classList.remove("active"));
    document.getElementById(id).classList.add("active");

    toggleSidebar(); // auto close sidebar on mobile
}


/* ===================== LOADER CONTROL ===================== */
function showLoader() {
    document.getElementById("loader").style.display = "flex";
}

function hideLoader() {
    document.getElementById("loader").style.display = "none";
}


/* ===================== GLOBAL VARIABLE ===================== */
let formattedText = "";


/* ===================== FETCH API FUNCTION ===================== */
async function fetchInfo() {
    const num = document.getElementById("num").value.trim();
    const rawBox = document.getElementById("rawBox");
    const formattedBox = document.getElementById("formattedBox");
    const status = document.getElementById("status");

    if (num.length !== 10) {
        status.innerHTML = "âŒ Enter a valid 10-digit number!";
        return;
    }

    // Reset UI
    rawBox.innerText = "Fetching...";
    formattedBox.innerText = "Loading...";
    status.innerHTML = "";
    formattedText = "";

    showLoader();

    const apiURL = `https://x2-proxy.vercel.app/api?num=${num}`;

    try {
        const res = await fetch(apiURL);
        const data = await res.json();

        hideLoader();
        showSection("raw");

        rawBox.innerText = JSON.stringify(data, null, 2);

        // If success & data available
        if (data.success && data.data && data.data.length > 0) {
            let output = "";

            data.data.forEach((item, i) => {
                output += 
`*Record ${i + 1}:*
*Name:* ${item.name}
*Father:* ${item.father_name}
*Mobile:* ${item.mobile}
*Alt Mobile:* ${item.alt_mobile || "N/A"}
*Circle:* ${item.circle}
*Address:* ${cleanAddress(item.address)}
*ID:* \`${item.id_number}\`
*Email:* ${item.email || "N/A"}

-------------------------
`;
            });

            formattedText = output;
            formattedBox.innerText = output;

            status.innerHTML = "âœ… Data loaded successfully!";
            showSection("formatted");
        } 
        else {
            formattedBox.innerText = "âŒ No data found!";
            status.innerHTML = "âš ï¸ No records available!";
        }

    } catch (err) {
        hideLoader();
        rawBox.innerText = "âŒ Error: " + err;
        formattedBox.innerText = "Error loading data.";
        status.innerHTML = "âŒ Failed to connect API!";
    }
}


/* ===================== CLEAN ADDRESS ===================== */
function cleanAddress(text) {
    if (!text) return "N/A";
    return text.replace(/!+/g, " ").replace(/\s+/g, " ").trim();
}


/* ===================== COPY FORMATTED TEXT ===================== */
function copyFormatted() {
    if (!formattedText) {
        alert("No formatted data to copy!");
        return;
    }

    navigator.clipboard.writeText(formattedText);
    alert("Copied in WhatsApp format!");
}


/* ===================== INITIAL HIDE LOADER ===================== */
window.onload = () => {
    hideLoader();
};
</script>

</body>
</html>
